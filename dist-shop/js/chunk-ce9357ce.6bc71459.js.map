{"version":3,"sources":["webpack:///./src/views/Home.vue?3d94","webpack:///./src/views/Home.vue?8974","webpack:///src/views/Home.vue","webpack:///./src/views/Home.vue?87ec","webpack:///./src/views/Home.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","on","$event","$router","push","name","params","city","_v","_s","address","class","showFilter","_m","attrs","_l","img","index","key","entry","i","item","image","filterData","showFilterView","update","ref","loadData","loadMore","allLoaded","bottomPullText","restaurant","staticRenderFns","data","swipeImgs","entries","page","size","restaurants","computed","$store","getters","created","getData","methods","$axios","then","isShow","condation","components","FilterView","IndexShop","component"],"mappings":"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","file":"js/chunk-ce9357ce.6bc71459.js","sourcesContent":["import mod from \"-!../../node_modules/_mini-css-extract-plugin@0.8.2@mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/_css-loader@1.0.1@css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/_vue-loader@15.9.1@vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../node_modules/_vue-loader@15.9.1@vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=style&index=0&id=4d71bae6&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/_mini-css-extract-plugin@0.8.2@mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/_css-loader@1.0.1@css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/_vue-loader@15.9.1@vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../node_modules/_vue-loader@15.9.1@vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=style&index=0&id=4d71bae6&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"home\"},[_c('div',{staticClass:\"header\"},[_c('div',{staticClass:\"address_map\",on:{\"click\":function($event){return _vm.$router.push({name: 'address',params: {city: _vm.city}})}}},[_c('i',{staticClass:\"fa fa-map-marker\"}),_c('span',[_vm._v(_vm._s(_vm.address))]),_c('i',{staticClass:\"fa fa-sort-desc\"})])]),_c('div',{staticClass:\"search_wrap\",class:{'fixedview':_vm.showFilter},on:{\"click\":function($event){return _vm.$router.push('/search')}}},[_vm._m(0)]),_c('div',{attrs:{\"id\":\"container\"}},[_c('mt-swipe',{staticClass:\"swiper\",attrs:{\"auto\":4000}},_vm._l((_vm.swipeImgs),function(img,index){return _c('mt-swipe-item',{key:index},[_c('img',{attrs:{\"src\":img,\"alt\":\"\"}})])}),1),_c('mt-swipe',{staticClass:\"entries\",attrs:{\"auto\":0}},_vm._l((_vm.entries),function(entry,i){return _c('mt-swipe-item',{key:i,staticClass:\"entry_wrap\"},_vm._l((entry),function(item,index){return _c('div',{key:index,staticClass:\"foodentry\"},[_c('div',{staticClass:\"img_wrap\"},[_c('img',{attrs:{\"src\":item.image,\"alt\":\"\"}})]),_c('span',[_vm._v(_vm._s(item.name))])])}),0)}),1)],1),_c('div',{staticClass:\"shoplist-title\"},[_vm._v(\"推荐商家\")]),_c('FilterView',{attrs:{\"filterData\":_vm.filterData},on:{\"searchFixed\":_vm.showFilterView,\"update\":_vm.update}}),_c('mt-loadmore',{ref:\"loadmore\",attrs:{\"top-method\":_vm.loadData,\"bottom-method\":_vm.loadMore,\"bottom-all-loaded\":_vm.allLoaded,\"auto-fill\":false,\"bottomPullText\":_vm.bottomPullText}},[_c('div',{staticClass:\"shoplist\"},_vm._l((_vm.restaurants),function(item,index){return _c('IndexShop',{key:index,attrs:{\"restaurant\":item.restaurant}})}),1)])],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"shop_search\"},[_c('i',{staticClass:\"fa fa-search\"}),_vm._v(\"\\n      搜索商家 商家名称\\n    \")])}]\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"home\">\n    <div class=\"header\">\n      <div class=\"address_map\" @click=\"$router.push({name: 'address',params: {city: city}})\">\n        <i class=\"fa fa-map-marker\"></i>\n        <span>{{address}}</span>\n        <i class=\"fa fa-sort-desc\"></i>\n      </div>\n    </div>\n    <div class=\"search_wrap\" :class=\"{'fixedview':showFilter}\" @click=\"$router.push('/search')\">\n      <div class=\"shop_search\">\n        <i class=\"fa fa-search\"></i>\n        搜索商家 商家名称\n      </div>\n    </div>\n    <div id=\"container\">\n      <!-- 轮播 -->\n      <mt-swipe :auto=\"4000\" class=\"swiper\">\n        <mt-swipe-item v-for=\"(img,index) in swipeImgs\" :key=\"index\">\n          <img :src=\"img\" alt>\n        </mt-swipe-item>\n      </mt-swipe>\n      <!-- 分类 -->\n      <mt-swipe :auto=\"0\" class=\"entries\">\n        <mt-swipe-item v-for=\"(entry,i) in entries\" :key=\"i\" class=\"entry_wrap\">\n          <div class=\"foodentry\" v-for=\"(item,index) in entry\" :key=\"index\">\n            <div class=\"img_wrap\">\n              <img :src=\"item.image\" alt>\n            </div>\n            <span>{{item.name}}</span>\n          </div>\n        </mt-swipe-item>\n      </mt-swipe>\n    </div>\n    <!-- 推荐商家 -->\n    <div class=\"shoplist-title\">推荐商家</div>\n\n    <!-- 导航 -->\n    <FilterView :filterData=\"filterData\" @searchFixed=\"showFilterView\" @update=\"update\"/>\n\n    <!-- 商家信息 -->\n    <mt-loadmore\n      :top-method=\"loadData\"\n      :bottom-method=\"loadMore\"\n      :bottom-all-loaded=\"allLoaded\"\n      :auto-fill=\"false\"\n      :bottomPullText=\"bottomPullText\"\n      ref=\"loadmore\"\n    >\n      <div class=\"shoplist\">\n        <IndexShop v-for=\"(item,index) in restaurants\" :key=\"index\" :restaurant=\"item.restaurant\"/>\n      </div>\n    </mt-loadmore>\n  </div>\n</template>\n\n<script>\nimport { Swipe, SwipeItem, Loadmore } from \"mint-ui\";\nimport FilterView from \"../components/FilterView\";\nimport IndexShop from \"../components/IndexShop\";\nexport default {\n  name: \"home\",\n  data() {\n    return {\n      swipeImgs: [],\n      entries: [],\n      filterData: null,\n      showFilter: false,\n      page: 1,\n      size: 5,\n      restaurants: [], // 存放所有商家容器\n      allLoaded: false,\n      bottomPullText: \"上拉加载更多\",\n      data: null\n    };\n  },\n  computed: {\n    address() {\n      return this.$store.getters.address;\n    },\n    city() {\n      return (\n        this.$store.getters.location.addressComponent.city ||\n        this.$store.getters.location.addressComponent.province\n      );\n    }\n  },\n  created() {\n    this.getData();\n  },\n  methods: {\n    getData() {\n      this.$axios(\"/api/profile/shopping\").then(res => {\n        // console.log(res.data);\n        this.swipeImgs = res.data.swipeImgs;\n        this.entries = res.data.entries;\n      });\n      this.$axios(\"/api/profile/filter\").then(res => {\n        // console.log(res.data);\n        this.filterData = res.data;\n      });\n      this.loadData();\n    },\n    loadData() {\n      this.page = 1;\n      this.allLoaded = false;\n      this.bottomPullText = \"上拉加载更多\";\n      // 拉取商家信息\n      this.$axios\n        .post(`/api/profile/restaurants/${this.page}/${this.size}`, this.data)\n        .then(res => {\n          // console.log(res.data);\n          this.$refs.loadmore.onTopLoaded();\n          this.restaurants = res.data;\n        });\n    },\n    loadMore() {\n      if (!this.allLoaded) {\n        this.page++;\n        // 拉取商家信息\n        this.$axios\n          .post(`/api/profile/restaurants/${this.page}/${this.size}`)\n          .then(res => {\n            //  加载完之后重新渲染\n            this.$refs.loadmore.onBottomLoaded();\n            if (res.data.length > 0) {\n              res.data.forEach(item => {\n                this.restaurants.push(item);\n              });\n              if (res.data < this.size) {\n                this.allLoaded = true;\n                this.bottomPullText = \"没有更多了哦\";\n              }\n            } else {\n              // 数据为空\n              this.allLoaded = true;\n              this.bottomPullText = \"没有更多了哦\";\n            }\n          });\n      }\n    },\n    showFilterView(isShow) {\n      this.showFilter = isShow;\n    },\n    update(condation) {\n      // console.log(condation);\n      this.data = condation;\n      this.loadData();\n    }\n  },\n  components: {\n    FilterView,\n    IndexShop\n  }\n};\n</script>\n\n<style scoped>\n.home {\n  width: 100%;\n  height: 100%;\n  overflow: auto;\n  box-sizing: border-box;\n}\n.header,\n.search_wrap {\n  background-color: #009eef;\n  padding: 10px 16px;\n}\n.header .address_map {\n  color: #fff;\n  font-weight: bold;\n}\n.address_map i {\n  margin: 0 3px;\n  font-size: 18px;\n}\n.address_map span {\n  display: inline-block;\n  width: 80%;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n}\n.search_wrap .shop_search {\n  /* margin-top: 10px; */\n  background-color: #fff;\n  padding: 10px 0;\n  border-radius: 4px;\n  text-align: center;\n  color: #aaa;\n}\n\n.search_wrap {\n  position: sticky;\n  top: 0px;\n  z-index: 999;\n  box-sizing: border-box;\n}\n.swiper {\n  height: 100px;\n}\n.swiper img {\n  width: 100%;\n  height: 100px;\n}\n\n.entries {\n  background: #fff;\n  height: 47.2vw;\n  text-align: center;\n  overflow: hidden;\n}\n.foodentry {\n  width: 20%;\n  float: left;\n  position: relative;\n  margin-top: 2.933333vw;\n}\n.foodentry .img_wrap {\n  position: relative;\n  display: inline-block;\n  width: 12vw;\n  height: 12vw;\n}\n.img_wrap img {\n  width: 100%;\n  height: 100%;\n}\n.foodentry span {\n  display: block;\n  color: #666;\n  font-size: 0.32rem;\n}\n/* 推荐商家 */\n.shoplist-title {\n  display: flex;\n  align-items: flex;\n  justify-content: center;\n  height: 9.6vw;\n  line-height: 9.6vw;\n  font-size: 16px;\n  color: #333;\n  background: #fff;\n}\n.shoplist-title:after,\n.shoplist-title:before {\n  display: block;\n  content: \"一\";\n  width: 5.333333vw;\n  height: 0.266667vw;\n  color: #999;\n}\n.shoplist-title:before {\n  margin-right: 3.466667vw;\n}\n.shoplist-title:after {\n  margin-left: 3.466667vw;\n}\n\n.fixedview {\n  width: 100%;\n  position: fixed;\n  top: 0px;\n  z-index: 999;\n}\n\n.mint-loadmore {\n  height: calc(100% - 95px);\n  overflow: auto;\n}\n</style>\n","import mod from \"-!../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--12-0!../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js!../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../node_modules/_vue-loader@15.9.1@vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--12-0!../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js!../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../node_modules/_vue-loader@15.9.1@vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Home.vue?vue&type=template&id=4d71bae6&scoped=true&\"\nimport script from \"./Home.vue?vue&type=script&lang=js&\"\nexport * from \"./Home.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Home.vue?vue&type=style&index=0&id=4d71bae6&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/_vue-loader@15.9.1@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4d71bae6\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}